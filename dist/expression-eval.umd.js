!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("jsep")):"function"==typeof define&&define.amd?define(["exports","jsep"],r):r((e||self).expressionEval={},e.jsep)}(this,function(e,r){function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=n(r),o=function(e,r,n){var t=function e(n){try{var t,a=n;switch(a.type){case"ArrayExpression":return Promise.resolve(i(a.elements));case"BinaryExpression":return Promise.resolve(Promise.all([e(a.left),e(a.right)])).then(function(e){return u[a.operator](e[0],e[1])});case"CallExpression":var c,l,f,p=function(){if("function"==typeof l){var e=l,r=e.apply,n=c;return Promise.resolve(i(a.arguments)).then(function(t){return Promise.resolve(r.call(e,n,t))})}},m="MemberExpression"===a.callee.type?Promise.resolve(o(a.callee)).then(function(e){c=(f=e)[0],l=f[1]}):Promise.resolve(e(a.callee)).then(function(e){l=e});return Promise.resolve(m&&m.then?m.then(p):p());case"ConditionalExpression":return Promise.resolve(e(a.test)).then(function(r){return Promise.resolve(e(r?a.consequent:a.alternate))});case"Identifier":return Promise.resolve(r[a.name]);case"Literal":return Promise.resolve(a.value);case"LogicalExpression":var v=function(r){return t?r:Promise.resolve(Promise.all([e(a.left),e(a.right)])).then(function(e){return u[a.operator](e[0],e[1])})},d="||"===a.operator?(t=1,Promise.resolve(e(a.left)).then(function(r){return r||Promise.resolve(e(a.right))})):function(){if("&&"===a.operator)return t=1,Promise.resolve(e(a.left)).then(function(r){return r?Promise.resolve(e(a.right)):r})}();return Promise.resolve(d&&d.then?d.then(v):v(d));case"MemberExpression":return Promise.resolve(o(a)).then(function(e){return e[1]});case"ThisExpression":return Promise.resolve(r);case"UnaryExpression":var h=s[a.operator];return Promise.resolve(e(a.argument)).then(function(e){return h.call(s,e)});default:return Promise.resolve(void 0)}}catch(e){return Promise.reject(e)}},o=function(e){try{return Promise.resolve(t(e.object)).then(function(r){return e.computed?Promise.resolve(t(e.property)).then(function(e){return[r,r[e]]}):[r,n.implicitOptionalChaining&&null==r?void 0:r[e.property.name]]})}catch(e){return Promise.reject(e)}},i=function(e){try{return Promise.resolve(Promise.all(e.map(function(e){return t(e)})))}catch(e){return Promise.reject(e)}};return void 0===n&&(n={}),t(e)},i={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},u={"||":function(e,r){return e||r},"&&":function(e,r){return e&&r},"|":function(e,r){return e|r},"^":function(e,r){return e^r},"&":function(e,r){return e&r},"==":function(e,r){return e==r},"!=":function(e,r){return e!=r},"===":function(e,r){return e===r},"!==":function(e,r){return e!==r},"<":function(e,r){return e<r},">":function(e,r){return e>r},"<=":function(e,r){return e<=r},">=":function(e,r){return e>=r},"<<":function(e,r){return e<<r},">>":function(e,r){return e>>r},">>>":function(e,r){return e>>>r},"+":function(e,r){return e+r},"-":function(e,r){return e-r},"*":function(e,r){return e*r},"/":function(e,r){return e/r},"%":function(e,r){return e%r}},s={"-":function(e){return-e},"+":function(e){return+e},"~":function(e){return~e},"!":function(e){return!e}};function a(e,r,n){function t(e){return e.map(function(e){return i(e)})}function o(e){var r=i(e.object);return e.computed?[r,r[i(e.property)]]:[r,n.implicitOptionalChaining&&null==r?void 0:r[e.property.name]]}function i(e){var n=e;switch(n.type){case"ArrayExpression":return t(n.elements);case"BinaryExpression":return u[n.operator](i(n.left),i(n.right));case"CallExpression":var a,c,l;if("MemberExpression"===n.callee.type?(a=(l=o(n.callee))[0],c=l[1]):c=i(n.callee),"function"!=typeof c)return;return c.apply(a,t(n.arguments));case"ConditionalExpression":return i(n.test)?i(n.consequent):i(n.alternate);case"Identifier":return r[n.name];case"Literal":return n.value;case"LogicalExpression":return"||"===n.operator?i(n.left)||i(n.right):"&&"===n.operator?i(n.left)&&i(n.right):u[n.operator](i(n.left),i(n.right));case"MemberExpression":return o(n)[1];case"ThisExpression":return r;case"UnaryExpression":return s[n.operator](i(n.argument));default:return}}return void 0===n&&(n={}),i(e)}Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.default}}),e.addBinaryOp=function(e,r,n){n?(t.default.addBinaryOp(e,r),u[e]=n):(t.default.addBinaryOp(e,i[e]||1),u[e]=r)},e.addUnaryOp=function(e,r){t.default.addUnaryOp(e),s[e]=r},e.compile=function(e){return a.bind(null,t.default(e))},e.compileAsync=function(e){return o.bind(null,t.default(e))},e.eval=a,e.evalAsync=o});
//# sourceMappingURL=expression-eval.umd.js.map
